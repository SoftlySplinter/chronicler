PID=chronicler.pid

case "$1" in
start)
  echo "Starting Chronicler"
  gunicorn --daemon --log-syslog --pid ${PID} --workers 4 --bind 127.0.0.1:8080 chronicler:api
;;
stop)
  echo "Stopping Chronicler"
  kill `cat ${PID}`
  rm ${PID}
;;
restart)
  if [ -f ${PID} ]
  then
    echo "Restarting Chronicler"
    $0 stop
    $0 start
  else
    echo "Chronicler not started"
    exit 255
  fi
;;
status)
   if [ -f ${PID} ]
   then
     echo "Chronicler running"
   else
     echo "Chronicler stopped"
   fi
;;
*)
  echo "Usage: $0 {start|stop|restart|status}"
  exit 1
esac
exit 0
